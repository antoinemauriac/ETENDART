<%= render "shared/academy_header" %>
<div class="yellow-title"><%= @school_period.name.upcase %> - <%= @camp.name.upcase %> - <%= @activity.name.upcase %></div>
<div class="container">
  <table class="table table-striped table-responsive table-center">
    <thead>
      <tr>
        <th>Date</th>
        <th>Heure de début</th>
        <th>Heure de fin</th>
        <th>Modifier</th>
        <th>Supprimer</th>
      </tr>
    </thead>
    <tbody>
      <% @courses.each do |course| %>
        <%= simple_form_for course, url: managers_course_path(course), method: :put, data: { turbo: false } do |f| %>
        <tr>
          <td class="align-middle">
            <%= link_to l(course.starts_at, format: :long), managers_course_path(course), class: "btn btn-primary btn-day" %>
          </td>
          <td class="align-middle">
            <%= f.input :starts_at, as: :time, label: false, minute_step: 15 %>
          </td>
          <td class="align-middle">
            <%= f.input :ends_at, as: :time, label: false, minute_step: 15 %>
          </td>
          <td class="align-middle">
            <%= f.submit "Mettre à jour l'horaire", class: 'btn btn-primary' %>
            <% end %>
          </td>
          <td class="align-middle">
            <%= link_to "Supprimer", managers_course_path(course), class: "btn btn-primary", data: {turbo_method: :delete, turbo_confirm: "Êtes-vous sûr de vouloir supprimer ce cours ?"} %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
<div class="yellow-title">LISTE DES ÉLÈVES</div>
<div class="container" data-controller="clickable-table">
  <table class="table table-striped table-responsive table-center">
    <thead>
      <tr>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Age</th>
        <th>Téléphone</th>
        <th>Supprimer</th>
      </tr>
    </thead>
    <tbody>
      <% @activity.students.each do |student| %>
        <tr class="clickable-tr" data-clickable-table-target="clickable" data-url="<%= managers_student_path(student) %>">
          <td><%= student.last_name %></td>
          <td><%= student.first_name %></td>
          <td><%= student.age %> ans</td>
          <td>0<%= student.phone_number %></td>
          <td>
            <%= link_to "Supprimer", managers_activity_enrollment_path(@activity.activity_enrollments.find_by(student_id: student.id)), method: :delete, data: { turbo_method: :delete, turbo_confirm: "Êtes-vous sûr de vouloir enlever cet élève ?" }, class: "btn btn-primary trash" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
