<%= simple_form_for @activity, url: managers_camp_activities_path(camp_id: @camp.id), method: :post, data: { controller: 'activity-form' } do |f| %>
  <%= f.input :name %>
  <%= f.input :category_id, as: :select, collection: Category.all, label_method: :name, value_method: :id %>
  <%= f.input :coach_id, as: :select, collection: User.all, label_method: :email, value_method: :id %>

  <ul>
    <li>
      <%= f.simple_fields_for :days do |day_form| %>
        <div class="row align-items-center">
          <div class="col-sm-2">
            <%= day_form.check_box :day_of_week, { multiple: true, checked: true }, "Monday".to_s %>
            <%= day_form.label :day_of_week, "Monday".to_s %>
          </div>
          <div class="col-sm-2">
           <%= day_form.time_field :start_time_Monday, value: Activity::DAYS[:Monday][:start_time], data: { activity_form_target: 'mondayStartTime', action: 'change->activity-form#onMondayStartTimeInputChange' }, class: "form-control" %>
          </div>
          <div class="col-sm-2">
            <%= day_form.time_field :end_time_Monday, value: Activity::DAYS[:Monday][:end_time], data: { activity_form_target: 'mondayEndTime', action: 'change->activity-form#onMondayEndTimeInputChange' }, class: "form-control" %>
          </div>
        </div>
        <% end %>
    </li>

    <% Activity::DAYS.except(:Monday).each do |day, times| %>
      <li>
        <%= f.simple_fields_for :days do |day_form| %>
          <div class="row align-items-center">
            <div class="col-sm-2">
              <%= day_form.check_box :day_of_week, { multiple: true, checked: true }, day.to_s %>
              <%= day_form.label :day_of_week, day.to_s %>
            </div>
            <div class="col-sm-2">
              <%= day_form.time_field :"start_time_#{day}", value: times[:start_time], data: { activity_form_target: 'startTime' }, class: "form-control" %>
            </div>
            <div class="col-sm-2">
              <%= day_form.time_field :"end_time_#{day}", value: times[:end_time], data: { activity_form_target: 'endTime' }, class: "form-control" %>
            </div>
          </div>
        <% end %>
      </li>
    <% end %>
  </ul>

  <%= f.submit "Save Activity", class: "btn btn-primary" %>
<% end %>

<% if @activity.errors.include?(:base) %>
  <div class="modal fade" id="error-modal" tabindex="-1" aria-labelledby="error-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header border-bottom-0">
          <button type="button" class="btn-close text-danger" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center">
          <p class="fs-5">L'heure de fin ne peut pas être antérieure à l'heure de début.</p>
        </div>
      </div>
    </div>
  </div>
  <script>
  console.log('hello')
    var errorModal = new bootstrap.Modal(document.getElementById('error-modal'), {})
    errorModal.show()
  </script>
<% end %>
