<%= render "shared/academy_header" %>
<div class="yellow-title">FEUILLE D'APPEL</div>

<div class="container">
    <p><%= @course.academy.name %> > <%= @course.school_period.name.upcase %> > <%= @course.camp.name.upcase %> > <%= @course.activity.name %> - <%= l(@course.starts_at, format: :default) %></p>
    <p>Status : ???????</p>
</div>

<div class="container flexy" data-controller="presence-sheet">
  <div class="form-container">
    <%= form_with(url: update_enrollments_managers_course_path(@course), method: :put, class: "presence-sheet-form") do |form| %>
      <table class="table table-striped table-responsive table-center">
        <thead>
          <tr>
            <th>Nom-Pr√©nom</th>
            <th></th>
            <th style="min-width:90px">Absent ?</th>
          </tr>
        </thead>
        <tbody>
          <% @enrollments.each do |enrollment| %>
            <tr>
              <td class="min"><%= link_to "#{enrollment.student.last_name} #{enrollment.student.first_name}", managers_student_path(enrollment.student), class: "student-mr" %></td>
              <td class="min">
                <div class="form-switch form-switch-lg">
                  <%= form.check_box "enrollments[#{enrollment.id}][present]", { class: "form-check-input form-switch-input", id: "present-#{enrollment.id}", checked: enrollment.present }, 1, 0 %>
                  <label class="form-check-label form-switch-label" for="present-#{enrollment.id}"></label>
                </div>
              </td>
              <td class="min"><span class="status-text <%= enrollment.present ? 'd-none' : '' %>">Absent</span></td>
            </tr>
          <% end %>
        </tbody>
      </table>
      <div class="flexy">
        <%= form.submit "Valider", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>
