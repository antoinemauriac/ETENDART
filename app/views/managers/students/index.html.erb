<%= render "shared/academy_header" %>
<div class="header-nav">
  <div class="header-nav-item"><%= link_to @academy.name.upcase, managers_academy_path(@academy) %></div>
  <div class="header-nav-item active">LES ÉLÈVES</div>
</div>
<div class="yellow-title">LES ÉLÈVES</div>
<div class="container" data-controller="search-student">
  <div class="student-list-header mt-2 mb-3">
    <%= link_to new_managers_student_path(academy_id: @academy.id), class: "btn-add-student" do %>
      <i class="fa-solid fa-square-plus fa-square-bigger"></i>NOUVEAU<i class="fa-solid fa-square-plus fa-square-bigger"></i>
    <% end %>
    <div  style="width:350px">
      <%= form_with url: managers_students_path, method: :get, html: {class: "d-flex", data: {search_student_target: "form"}} do |f| %>
        <%= f.text_field :query,
              class: "student-input-search",
              placeholder: "Rechercher",
              value: params[:query],
              data: {
                search_student_target: "input",
                academy_id: @academy.id,
                action: "keyup->search-student#update"
              },
              autofocus: false %>
      <% end %>
    </div>
    <%= link_to export_students_csv_managers_student_path(@academy, format: :csv), class: 'btn-add-student' do %>
      <i class="fa-solid fa-download fa-no-margin"></i>LES ÉLÈVES<i class="fa-solid fa-download fa-no-margin"></i>
    <% end %>
  </div>
  <%= render "list", students: @students %>
  <div class="flexy mb-3">
    <%== pagy_bootstrap_nav(@pagy) if @pagy.pages > 1 %>
  </div>
</div>
