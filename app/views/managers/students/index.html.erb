<%= render "shared/academy_header" %>
<div class="header-nav">
  <div class="header-nav-item"><%= link_to @academy.name.upcase, managers_academy_path(@academy) %></div>
  <div class="header-nav-item active">LES ÉLÈVES</div>
</div>
<div class="yellow-title">LES ÉLÈVES</div>
<div class="container">
  <div class="flexy">
    <%= link_to new_managers_student_path(academy_id: @academy.id), class: "btn-etendart-square mt-3 mb-2" do %>
      <i class="fa-solid fa-square-plus"></i> AJOUTER UN ÉLÈVE <i class="fa-solid fa-square-plus"></i>
    <% end %>
  </div>
  <div data-controller="student-table" class="form-container table-center">
    <table id="myTable" class="table table-striped table-responsive">
      <thead>
        <tr>
          <th data-orderable="true" data-searchable="true" class="table-search-header" data-name="nom">Nom</th>
          <th data-orderable="true" data-searchable="true" class="table-search-header" data-name="prenom">Prénom</th>
          <th data-orderable="true" data-searchable="true" class="table-search-header" data-name="genre">Genre</th>
          <th data-orderable="true" data-searchable="true" class="table-search-header" data-name="email">Email</th>
          <th data-orderable="true" data-searchable="true" class="table-search-header" data-name="phone">Téléphone</th>
          <th data-orderable="true" data-searchable="true" class="table-search-header" data-name="datenaissance">Date de naissance</th>
          <th data-orderable="true" data-searchable="true" class="table-search-header" data-name="city">Ville</th>
        </tr>
      </thead>
      <tbody>
        <% @students.each do |student| %>
          <tr class="clickable-tr" onclick="window.location.href='<%= managers_student_path(student, academy_id: @academy) %>'">
            <td><%= student.last_name %></td>
            <td><%= student.first_name %></td>
            <td><%= student.gender %></td>
            <td><%= student.email %></td>
            <td><%= student.phone_modified %></td>
            <td><%= student.date_of_birth %></td>
            <td><%= student.city %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
