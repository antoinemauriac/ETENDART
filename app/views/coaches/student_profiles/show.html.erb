<div class="yellow-title mb-3"><%= @student.full_name.upcase %></div>


<div class="container flexy" data-controller="upload-photo">
    <%= cl_image_tag @student.photo_or_default, class: "avatar", data: { upload_photo_target: "photo" } %>
    <div class="spinner-border text-primary d-none" role="status" data-upload-photo-target="spinner">
      <span class="sr-only">Loading...</span>
    </div>
    <% if @student.photo.attached? %>
      <%= simple_form_for(@student, url: update_photo_managers_student_path(@student), method: :put, html: { multipart: true, data: { upload_photo_target: "form" } }) do |form| %>
        <%= form.input :photo, label: "Changer la photo", as: :file, input_html: { onchange: 'this.form.submit();', id: 'photo-input', style: 'display:none;cursor:pointer', accept: "image/*" }, label_html: { class: "btn-photo" } %>
      <% end %>
    <% else %>
      <%= simple_form_for(@student, url: update_photo_managers_student_path(@student), method: :put, html: { multipart: true, data: { upload_photo_target: "form" } }) do |form| %>
        <%= form.input :photo, label: "Ajouter une photo", as: :file, input_html: { onchange: 'this.form.submit();', id: 'photo-input', style: 'display:none;cursor:pointer', accept: "image/*"}, label_html: { class: "btn-photo" } %>
      <% end %>
    <% end %>
</div>


<% @feedbacks.each do |feedback| %>
  <p><%= feedback.created_at%> - <%= feedback.content %></p>
<% end %>
<%= link_to "Ajouter un feedback", new_coaches_feedback_path(params: { student_id: @student.id }), class: "btn-etendart-small-device" %>
