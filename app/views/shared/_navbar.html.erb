<nav class="navbar" data-controller="navbar" data-navbar-target="navbar">
  <%= link_to "Etendart", "/", class: "navbar-brand" %>
  <button class="navbar-tog" data-navbar-target="navbarToggle" data-action="click->navbar#displayMenu">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <div class="navbar-collapse" data-navbar-target="navbarCollapse">
    <ul class="nav navbar-nav">
      <% if user_signed_in? %>
        <li class="nav-item active">
          <%= link_to "ACCUEIL", "/", class: "nav-link" %>
        </li>
        <% if current_user.coach? %>
          <ul class="dashboard-details">
            <li class="nav-item nav-item-small">
              <%= link_to "LES COURS", coaches_courses_path, class: "nav-link nav-link-small" %>
            </li>
            <li class="nav-item nav-item-small">
              <%= link_to "LES ÉLÈVES", coaches_student_profiles_path, class: "nav-link nav-link-small" %>
            </li>
          </ul>
        <% end %>
        <% if current_user.admin? %>
          <div class="dropdown" style="margin-left: -1px">
            <li class="nav-item d-flex align-items-center justify-content-center">
              <div class="nav-link nav-link-small" style="cursor:pointer">ADMIN</div>
              <i class="fa fa-caret-down"></i>
            </li>
            <div class="dropdown-content">
                <div class="dropdown-sub">
                  <span class="full-width-link">
                    <%= link_to "ÉLÈVES", index_for_admin_managers_students_path, class: "nav-link nav-link-small nav-academy" %>
                  </span>
                </div>
                <div class="dropdown-sub">
                  <span class="full-width-link">
                    <%= link_to "STAGES", index_for_admin_managers_school_periods_path, class: "nav-link nav-link-small nav-academy" %>
                  </span>
                </div>
                <div class="dropdown-sub">
                  <span class="full-width-link">
                    <div class="nav-link nav-link-small nav-academy">FINANCE</div>
                  </span>
                  <div class="sub-content">
                    <%= link_to "COTISATION", membership_finances_overview_managers_finances_path %>
                    <%= link_to "STAGES", camp_finances_overview_managers_finances_path %>
                  </div>
                </div>
            </div>
          </div>
        <% end %>
        <% if current_user.manager? || current_user.coordinator? %>
          <% academies = current_user.academies %>
          <div class="dropdown" style="margin-left: -1px;">
            <li class="nav-item d-flex align-items-center justify-content-center">
              <div class="nav-link nav-link-small" style="cursor:pointer">ACADEMIES</div>
              <i class="fa fa-caret-down"></i>
            </li>
            <div class="dropdown-content">
              <% academies.order(:created_at).each do |academy| %>
                <div class="dropdown-sub">
                  <span class="full-width-link">
                    <%= link_to academy.name.upcase, managers_academy_path(academy), class: "nav-link nav-link-small nav-academy" %>
                  </span>
                  <div class="sub-content">
                    <%= link_to "STAGES", managers_school_periods_path(academy: academy) %>
                    <% if academy.annual %>
                      <%= link_to "PROGRAMME ANNUEL", managers_annual_programs_path(academy: academy) %>
                    <% end %>
                    <%= link_to "ÉLÈVES", managers_students_path(academy: academy) %>
                    <%= link_to "COACHS", managers_coaches_path(academy: academy) %>
                    <%= link_to "CATEGORIES", managers_categories_path(academy: academy) %>
                    <%= link_to "ADRESSES", managers_locations_path(academy: academy) %>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
          <div class="dropdown" style="margin-left: -1px;">
            <li class="nav-item d-flex align-items-center justify-content-center">
              <div class="nav-link nav-link-small" style="cursor:pointer">FINANCE</div>
              <i class="fa fa-caret-down"></i>
            </li>
            <div class="dropdown-content">
                <div class="dropdown-sub">
                  <span class="full-width-link">
                    <%= link_to "COTISATION", membership_finances_overview_managers_finances_path, class: "nav-link nav-link-small nav-academy" %>
                  </span>
                </div>
                <div class="dropdown-sub">
                  <span class="full-width-link">
                    <%= link_to "STAGES", camp_finances_overview_managers_finances_path, class: "nav-link nav-link-small nav-academy" %>
                  </span>
                </div>
            </div>
          </div>
        <% end %>
        <li class="nav-item">
          <%= link_to "MON PROFIL",  edit_user_registration_path, class: "nav-link" %>
        </li>
        <li class="nav-item" id="deconnection">
          <%= link_to "SE DÉCONNECTER", destroy_user_session_path, data: {turbo_method: :delete}, class: "nav-link"%>
        </li>
      <% else %>
        <li class="nav-item no-border">
          <%= link_to "SE CONNECTER", new_user_session_path, class: "nav-link"%>
        </li>
      <% end %>
    </ul>
  </div>
</nav>
